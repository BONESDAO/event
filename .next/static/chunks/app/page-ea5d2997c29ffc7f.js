(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{612:(e,t,r)=>{Promise.resolve().then(r.bind(r,6562))},5271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return s}});let n=r(46);function s(e,t){let r=(0,n.useRef)(()=>{}),s=(0,n.useRef)(()=>{});return(0,n.useMemo)(()=>e&&t?n=>{null===n?(r.current(),s.current()):(r.current=a(e,n),s.current=a(t,n))}:e||t,[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4356:(e,t,r)=>{"use strict";r.d(t,{WalletProvider:()=>i,v:()=>o});var n=r(5109),s=r(46);let a=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let e=localStorage.getItem("walletAddress");e&&i(e)},[]),(0,s.useEffect)(()=>{r&&localStorage.setItem("walletAddress",r)},[r]),(0,n.jsx)(a.Provider,{value:{walletAddress:r,setWalletAddress:i},children:t})},o=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useWallet must be used within a WalletProvider");return e}},6562:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var n=r(5109),s=r(8248),a=r(1593),i=r(7903),o=r.n(i),l=r(46),c=r(4356);let d=async e=>{try{let t=await fetch("https://api.deworkhub.com/api/users/".concat(e));if(!t.ok)return console.error("请求失败，状态码：".concat(t.status)),null;let r=await t.json();if(console.log("API 返回数据:",r),r.success&&r.data)return r.data;return console.error("API 返回的数据结构不符合预期:",r),null}catch(e){return console.error("请求 API 失败:",e),null}},u=async e=>{let t=await fetch("https://api.deworkhub.com/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e,points:0,completed_steps:0,freeAttemptsToday:1,lastResetDate:null,RemainingTimes:0})});return await t.json()};function f(){let{setWalletAddress:e}=(0,c.v)(),[t,r]=(0,l.useState)(null),[i,f]=(0,l.useState)(0),m=async()=>{if(void 0!==window.ethereum)try{let t=(await window.ethereum.request({method:"eth_requestAccounts"}))[0];r(t),e(t);let n=await d(t);n?f(n.points):(await u(t),f(0))}catch(e){console.error("连接 MetaMask 失败:",e)}else alert("请安装 MetaMask!")};return(0,n.jsx)("div",{className:"flex min-h-screen flex-col",children:(0,n.jsx)("main",{className:"flex flex-1 justify-center items-center",children:(0,n.jsx)("section",{className:"space-y-8 pb-8 pt-6 md:pb-12 md:pt-10 lg:py-32",children:(0,n.jsxs)("div",{className:"container flex max-w-[64rem] flex-col items-center gap-6 text-center",children:[(0,n.jsxs)(a.P.h1,{className:"font-heading text-3xl sm:text-5xl md:text-6xl lg:text-7xl mb-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:["探索生态世界的",(0,n.jsx)("span",{className:"text-gradient_indigo-purple",children:" 趣味之旅"})]}),(0,n.jsx)(a.P.p,{className:"max-w-[42rem] leading-normal text-muted-foreground sm:text-xl sm:leading-8 mb-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:"通过跳格子游戏，探索区块链生态的精彩世界。每一步都可能带来惊喜， 每一跳都是新的发现。"}),(0,n.jsxs)(a.P.div,{className:"space-x-4 flex justify-center mb-36",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[(0,n.jsx)(s.$,{size:"lg",className:"bg-gradient-to-r from-indigo-500 to-purple-500 text-white",onClick:m,children:"连接钱包"}),(0,n.jsx)(o(),{href:t?"/game":"#",children:(0,n.jsx)(s.$,{size:"lg",className:"bg-gradient-to-r from-indigo-500 to-purple-500 text-white ".concat(t?"":"cursor-not-allowed opacity-50"),disabled:!t,children:"开始游戏"})})]}),t&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:["钱包地址: ",t]}),(0,n.jsxs)("p",{children:["当前积分: ",i]})]}),!t&&(0,n.jsx)("div",{className:"text-red-500 mt-4",children:(0,n.jsx)("p",{children:"请先连接钱包才能开始游戏！"})})]})})})})}},8248:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var n=r(5109),s=r(46),a=r(1744),i=r(9917),o=r(9508);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,u=c?a.DX:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},9508:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var n=r(5765),s=r(8816);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,n.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[948,202,903,572,231,358],()=>t(612)),_N_E=e.O()}]);